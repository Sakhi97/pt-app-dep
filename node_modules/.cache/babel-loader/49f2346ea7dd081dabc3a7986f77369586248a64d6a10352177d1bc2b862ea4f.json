{"ast":null,"code":"var _jsxFileName = \"/Users/sakhiahmad/Desktop/Uni/Front-end/pt-app/ptapp/src/components/Traininglist.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { DataGrid, GridToolbar } from \"@mui/x-data-grid\";\nimport dayjs from \"dayjs\";\nimport Button from \"@mui/material/Button\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction TrainingList() {\n  _s();\n  const API_URL = process.env.REACT_APP_API_URL;\n  const [trainings, setTrainings] = useState([]);\n  const [columnDefs] = useState([{\n    field: \"date\",\n    headerName: \"Date\",\n    sortable: true,\n    filter: true,\n    width: 180,\n    valueFormatter: params => dayjs(params.value).format(\"DD.MM.YYYY HH:mm\")\n  }, {\n    field: \"duration\",\n    headerName: \"Duration\",\n    sortable: true,\n    filter: true,\n    width: 150\n  }, {\n    field: \"activity\",\n    headerName: \"Activity\",\n    sortable: true,\n    filter: true,\n    width: 150\n  }, {\n    field: \"customer\",\n    headerName: \"Customer\",\n    sortable: true,\n    filter: true,\n    width: 200\n  }, {\n    field: \"delete\",\n    headerName: \"Delete\",\n    width: 100,\n    disableExport: true,\n    renderCell: params => /*#__PURE__*/_jsxDEV(DeleteButtonCell, {\n      ...params\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 31\n    }, this)\n  }]);\n  function DeleteButtonCell(props) {\n    return /*#__PURE__*/_jsxDEV(Button, {\n      size: \"small\",\n      color: \"error\",\n      onClick: () => deleteTraining(props.row),\n      children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n  const deleteTraining = row => {\n    if (window.confirm(\"Are you sure?\")) {\n      const url = row.links.find(link => link.rel === \"self\").href;\n      fetch(url, {\n        method: \"DELETE\"\n      }).then(response => {\n        if (response.ok) {\n          setTrainings(prevTrainings => prevTrainings.filter(t => t.links[0].href !== url));\n        } else {\n          alert(\"Something went wrong in deletion\");\n        }\n      }).catch(err => console.error(err));\n    }\n  };\n  const getTrainings = async () => {\n    try {\n      const response = await fetch(API_URL + \"/trainings\");\n      if (!response.ok) {\n        throw new Error(\"Error occurred in fetching trainings data\");\n      }\n      const {\n        content: data\n      } = await response.json();\n      const fetchCustomer = async training => {\n        var _training$links$find;\n        const customerUrl = (_training$links$find = training.links.find(link => link.rel === \"customer\")) === null || _training$links$find === void 0 ? void 0 : _training$links$find.href;\n        const customerResponse = await fetch(customerUrl);\n        if (!customerResponse.ok) {\n          throw new Error(\"Could not fetch customer data for training\");\n        }\n        return await customerResponse.json();\n      };\n      const trainingsWithCustomer = await Promise.all(data.map(async training => {\n        const customerData = await fetchCustomer(training);\n        const customer = `${customerData.firstname} ${customerData.lastname}`;\n        return {\n          ...training,\n          customer\n        };\n      }));\n      setTrainings(trainingsWithCustomer);\n    } catch (error) {\n      console.error(\"Error fetching trainings:\", error);\n    }\n  };\n  useEffect(() => {\n    getTrainings();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: 600,\n        width: \"65%\",\n        margin: \"auto\"\n      },\n      children: /*#__PURE__*/_jsxDEV(DataGrid, {\n        components: {\n          Toolbar: GridToolbar\n        },\n        rows: trainings,\n        columns: columnDefs,\n        initialState: {\n          pagination: {\n            paginationModel: {\n              pageSize: 10\n            }\n          }\n        },\n        pagination: true,\n        pageSize: 10,\n        pageSizeOptions: [5, 10, 15],\n        getRowId: row => row.links.find(link => link.rel === \"self\").href\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(TrainingList, \"iqPzuf/sZ8/HmpXQMI39ZyqhKMI=\");\n_c = TrainingList;\nexport default TrainingList;\nvar _c;\n$RefreshReg$(_c, \"TrainingList\");","map":{"version":3,"names":["React","useState","useEffect","DataGrid","GridToolbar","dayjs","Button","DeleteIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","TrainingList","_s","API_URL","process","env","REACT_APP_API_URL","trainings","setTrainings","columnDefs","field","headerName","sortable","filter","width","valueFormatter","params","value","format","disableExport","renderCell","DeleteButtonCell","fileName","_jsxFileName","lineNumber","columnNumber","props","size","color","onClick","deleteTraining","row","children","window","confirm","url","links","find","link","rel","href","fetch","method","then","response","ok","prevTrainings","t","alert","catch","err","console","error","getTrainings","Error","content","data","json","fetchCustomer","training","_training$links$find","customerUrl","customerResponse","trainingsWithCustomer","Promise","all","map","customerData","customer","firstname","lastname","style","height","margin","components","Toolbar","rows","columns","initialState","pagination","paginationModel","pageSize","pageSizeOptions","getRowId","_c","$RefreshReg$"],"sources":["/Users/sakhiahmad/Desktop/Uni/Front-end/pt-app/ptapp/src/components/Traininglist.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { DataGrid, GridToolbar } from \"@mui/x-data-grid\";\nimport dayjs from \"dayjs\";\nimport Button from \"@mui/material/Button\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\n\nfunction TrainingList() {\n  const API_URL = process.env.REACT_APP_API_URL;\n  const [trainings, setTrainings] = useState([]);\n\n  const [columnDefs] = useState([\n    {\n      field: \"date\",\n      headerName: \"Date\",\n      sortable: true,\n      filter: true,\n      width: 180,\n      valueFormatter: (params) => dayjs(params.value).format(\"DD.MM.YYYY HH:mm\"),\n    },\n    {\n      field: \"duration\",\n      headerName: \"Duration\",\n      sortable: true,\n      filter: true,\n      width: 150,\n    },\n    {\n      field: \"activity\",\n      headerName: \"Activity\",\n      sortable: true,\n      filter: true,\n      width: 150,\n    },\n    {\n      field: \"customer\",\n      headerName: \"Customer\",\n      sortable: true,\n      filter: true,\n      width: 200,\n    },\n    {\n      field: \"delete\",\n      headerName: \"Delete\",\n      width: 100,\n      disableExport: true,\n      renderCell: (params) => <DeleteButtonCell {...params} />,\n    },\n  ]);\n\n  function DeleteButtonCell(props) {\n    return (\n      <Button\n        size=\"small\"\n        color=\"error\"\n        onClick={() => deleteTraining(props.row)}\n      >\n        <DeleteIcon />\n      </Button>\n    );\n  }\n\n  const deleteTraining = (row) => {\n    if (window.confirm(\"Are you sure?\")) {\n      const url = row.links.find((link) => link.rel === \"self\").href;\n      fetch(url, { method: \"DELETE\" })\n        .then((response) => {\n          if (response.ok) {\n            setTrainings((prevTrainings) =>\n              prevTrainings.filter((t) => t.links[0].href !== url)\n            );\n          } else {\n            alert(\"Something went wrong in deletion\");\n          }\n        })\n        .catch((err) => console.error(err));\n    }\n  };\n\n  const getTrainings = async () => {\n    try {\n      const response = await fetch(API_URL + \"/trainings\");\n      if (!response.ok) {\n        throw new Error(\"Error occurred in fetching trainings data\");\n      }\n      const { content: data } = await response.json();\n\n      const fetchCustomer = async (training) => {\n        const customerUrl = training.links.find(\n          (link) => link.rel === \"customer\"\n        )?.href;\n        const customerResponse = await fetch(customerUrl);\n        if (!customerResponse.ok) {\n          throw new Error(\"Could not fetch customer data for training\");\n        }\n        return await customerResponse.json();\n      };\n\n      const trainingsWithCustomer = await Promise.all(\n        data.map(async (training) => {\n          const customerData = await fetchCustomer(training);\n          const customer = `${customerData.firstname} ${customerData.lastname}`;\n          return { ...training, customer };\n        })\n      );\n\n      setTrainings(trainingsWithCustomer);\n    } catch (error) {\n      console.error(\"Error fetching trainings:\", error);\n    }\n  };\n\n  useEffect(() => {\n    getTrainings();\n  }, []);\n\n  return (\n    <>\n      <div style={{ height: 600, width: \"65%\", margin: \"auto\"}}>\n        <DataGrid\n          components={{ Toolbar: GridToolbar }}\n          rows={trainings}\n          columns={columnDefs}\n          initialState={{\n            pagination: { paginationModel: { pageSize: 10 } },\n          }}\n          pagination\n          pageSize={10}\n          pageSizeOptions={[5, 10, 15]}\n          getRowId={(row) => row.links.find((link) => link.rel === \"self\").href}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default TrainingList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}