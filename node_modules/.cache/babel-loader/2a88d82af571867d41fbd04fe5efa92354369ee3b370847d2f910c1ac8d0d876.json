{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sakhiahmad/Desktop/Uni/Front-end/pt-app/ptapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/sakhiahmad/Desktop/Uni/Front-end/pt-app/ptapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/sakhiahmad/Desktop/Uni/Front-end/pt-app/ptapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sakhiahmad/Desktop/Uni/Front-end/pt-app/ptapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import FullCalendar from'@fullcalendar/react';import dayGridPlugin from'@fullcalendar/daygrid';import timeGridPlugin from'@fullcalendar/timegrid';import interactionPlugin from'@fullcalendar/interaction';import Dialog from'@mui/material/Dialog';import DialogTitle from'@mui/material/DialogTitle';import DialogContent from'@mui/material/DialogContent';import DialogActions from'@mui/material/DialogActions';import Button from'@mui/material/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Calendar(){var GET_ALL_URL=process.env.REACT_APP_GET_TRAININGS;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),trainings=_useState2[0],setTrainings=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedTraining=_useState4[0],setSelectedTraining=_useState4[1];useEffect(function(){fetchTrainings();},[]);var fetchTrainings=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var trainingsResponse,trainingsData,formattedTrainings;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(GET_ALL_URL);case 3:trainingsResponse=_context.sent;_context.next=6;return trainingsResponse.json();case 6:trainingsData=_context.sent;formattedTrainings=trainingsData.map(function(training){var customer=training.customer;var title=customer?\"\".concat(training.activity,\" / \").concat(customer.firstname,\" \").concat(customer.lastname):\"\".concat(training.activity,\" / Unknown Customer\");var startTime=new Date(training.date);var endTime=new Date(startTime.getTime()+training.duration*60000);return _objectSpread({title:title,start:startTime,end:endTime},training);});setTrainings(formattedTrainings);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function fetchTrainings(){return _ref.apply(this,arguments);};}();var handleDateClick=function handleDateClick(info){console.log('Clicked on date:',info.dateStr);};var handleEventClick=function handleEventClick(info){setSelectedTraining(info.event);};var handleClose=function handleClose(){setSelectedTraining(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"calendar\",children:[/*#__PURE__*/_jsx(FullCalendar,{plugins:[dayGridPlugin,timeGridPlugin,interactionPlugin],initialView:\"dayGridMonth\",headerToolbar:{left:'prev,next today',center:'title',right:'dayGridMonth,timeGridWeek,timeGridDay'},events:trainings,dateClick:handleDateClick,eventClick:handleEventClick// Add eventClick callback\n}),/*#__PURE__*/_jsxs(Dialog,{open:selectedTraining!==null,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:selectedTraining===null||selectedTraining===void 0?void 0:selectedTraining.title}),/*#__PURE__*/_jsx(DialogTitle,{children:selectedTraining===null||selectedTraining===void 0?void 0:selectedTraining.extendedProps.title}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",selectedTraining?selectedTraining.start.toLocaleDateString():'']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Duration: \",selectedTraining?((selectedTraining.end-selectedTraining.start)/60000).toFixed():'',\" minutes\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Activity: \",selectedTraining===null||selectedTraining===void 0?void 0:selectedTraining.extendedProps.activity]}),(selectedTraining===null||selectedTraining===void 0?void 0:selectedTraining.extendedProps.customer)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Customer: \",selectedTraining.extendedProps.customer.firstname,\" \",selectedTraining.extendedProps.customer.lastname]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",selectedTraining.extendedProps.customer.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Phone: \",selectedTraining.extendedProps.customer.phone]})]})]}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:handleClose,children:\"Close\"})})]})]});}export default Calendar;","map":{"version":3,"names":["React","useState","useEffect","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","Dialog","DialogTitle","DialogContent","DialogActions","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Calendar","GET_ALL_URL","process","env","REACT_APP_GET_TRAININGS","_useState","_useState2","_slicedToArray","trainings","setTrainings","_useState3","_useState4","selectedTraining","setSelectedTraining","fetchTrainings","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","trainingsResponse","trainingsData","formattedTrainings","wrap","_callee$","_context","prev","next","fetch","sent","json","map","training","customer","title","concat","activity","firstname","lastname","startTime","Date","date","endTime","getTime","duration","_objectSpread","start","end","t0","console","error","stop","apply","arguments","handleDateClick","info","log","dateStr","handleEventClick","event","handleClose","className","children","plugins","initialView","headerToolbar","left","center","right","events","dateClick","eventClick","open","onClose","extendedProps","toLocaleDateString","toFixed","email","phone","onClick"],"sources":["/Users/sakhiahmad/Desktop/Uni/Front-end/pt-app/ptapp/src/components/Calendar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport Dialog from '@mui/material/Dialog';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\n\nfunction Calendar() {\n  const GET_ALL_URL = process.env.REACT_APP_GET_TRAININGS;\n  const [trainings, setTrainings] = useState([]);\n  const [selectedTraining, setSelectedTraining] = useState(null);\n\n  useEffect(() => {\n    fetchTrainings();\n  }, []);\n\n  const fetchTrainings = async () => {\n    try {\n      const trainingsResponse = await fetch(GET_ALL_URL);\n      const trainingsData = await trainingsResponse.json();\n\n      const formattedTrainings = trainingsData.map((training) => {\n        const customer = training.customer;\n        const title = customer\n          ? `${training.activity} / ${customer.firstname} ${customer.lastname}`\n          : `${training.activity} / Unknown Customer`;\n\n        const startTime = new Date(training.date);\n        const endTime = new Date(startTime.getTime() + training.duration * 60000);\n\n        return {\n          title,\n          start: startTime,\n          end: endTime,\n          ...training, // Add all training data to the event object\n        };\n      });\n\n      setTrainings(formattedTrainings);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleDateClick = (info) => {\n    console.log('Clicked on date:', info.dateStr);\n  };\n\n  const handleEventClick = (info) => {\n    setSelectedTraining(info.event);\n  };\n\n  const handleClose = () => {\n    setSelectedTraining(null);\n  };\n\n  return (\n    <div className=\"calendar\">\n      <FullCalendar\n        plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\n        initialView=\"dayGridMonth\"\n        headerToolbar={{\n          left: 'prev,next today',\n          center: 'title',\n          right: 'dayGridMonth,timeGridWeek,timeGridDay',\n        }}\n        events={trainings}\n        dateClick={handleDateClick}\n        eventClick={handleEventClick} // Add eventClick callback\n      />\n\n      {/* Show selected training in a dialog */}\n      <Dialog open={selectedTraining !== null} onClose={handleClose}>\n        <DialogTitle>{selectedTraining?.title}</DialogTitle>\n        <DialogTitle>{selectedTraining?.extendedProps.title}</DialogTitle>\n        <DialogContent>\n  <p>Date: {selectedTraining ? selectedTraining.start.toLocaleDateString() : ''}</p>\n  <p>Duration: {selectedTraining ? ((selectedTraining.end - selectedTraining.start) / 60000).toFixed() : ''} minutes</p>\n  <p>Activity: {selectedTraining?.extendedProps.activity}</p>\n  {selectedTraining?.extendedProps.customer && (\n    <>\n      <p>Customer: {selectedTraining.extendedProps.customer.firstname} {selectedTraining.extendedProps.customer.lastname}</p>\n      <p>Email: {selectedTraining.extendedProps.customer.email}</p>\n      <p>Phone: {selectedTraining.extendedProps.customer.phone}</p>\n    </>\n  )}\n</DialogContent>\n\n\n        <DialogActions>\n          <Button onClick={handleClose}>Close</Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n\nexport default Calendar;\n\n\n"],"mappings":"ujBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,YAAY,KAAM,qBAAqB,CAC9C,MAAO,CAAAC,aAAa,KAAM,uBAAuB,CACjD,MAAO,CAAAC,cAAc,KAAM,wBAAwB,CACnD,MAAO,CAAAC,iBAAiB,KAAM,2BAA2B,CACzD,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,MAAO,CAAAC,aAAa,KAAM,6BAA6B,CACvD,MAAO,CAAAC,aAAa,KAAM,6BAA6B,CACvD,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE1C,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,GAAM,CAAAC,WAAW,CAAGC,OAAO,CAACC,GAAG,CAACC,uBAAuB,CACvD,IAAAC,SAAA,CAAkCtB,QAAQ,CAAC,EAAE,CAAC,CAAAuB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAvCG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAAgD3B,QAAQ,CAAC,IAAI,CAAC,CAAA4B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAvDE,gBAAgB,CAAAD,UAAA,IAAEE,mBAAmB,CAAAF,UAAA,IAE5C3B,SAAS,CAAC,UAAM,CACd8B,cAAc,EAAE,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAA,cAAc,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,iBAAA,CAAAC,aAAA,CAAAC,kBAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEa,CAAAC,KAAK,CAAC3B,WAAW,CAAC,QAA5CmB,iBAAiB,CAAAK,QAAA,CAAAI,IAAA,CAAAJ,QAAA,CAAAE,IAAA,SACK,CAAAP,iBAAiB,CAACU,IAAI,EAAE,QAA9CT,aAAa,CAAAI,QAAA,CAAAI,IAAA,CAEbP,kBAAkB,CAAGD,aAAa,CAACU,GAAG,CAAC,SAACC,QAAQ,CAAK,CACzD,GAAM,CAAAC,QAAQ,CAAGD,QAAQ,CAACC,QAAQ,CAClC,GAAM,CAAAC,KAAK,CAAGD,QAAQ,IAAAE,MAAA,CACfH,QAAQ,CAACI,QAAQ,QAAAD,MAAA,CAAMF,QAAQ,CAACI,SAAS,MAAAF,MAAA,CAAIF,QAAQ,CAACK,QAAQ,KAAAH,MAAA,CAC9DH,QAAQ,CAACI,QAAQ,uBAAqB,CAE7C,GAAM,CAAAG,SAAS,CAAG,GAAI,CAAAC,IAAI,CAACR,QAAQ,CAACS,IAAI,CAAC,CACzC,GAAM,CAAAC,OAAO,CAAG,GAAI,CAAAF,IAAI,CAACD,SAAS,CAACI,OAAO,EAAE,CAAGX,QAAQ,CAACY,QAAQ,CAAG,KAAK,CAAC,CAEzE,OAAAC,aAAA,EACEX,KAAK,CAALA,KAAK,CACLY,KAAK,CAAEP,SAAS,CAChBQ,GAAG,CAAEL,OAAO,EACTV,QAAQ,EAEf,CAAC,CAAC,CAEFvB,YAAY,CAACa,kBAAkB,CAAC,CAACG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAuB,EAAA,CAAAvB,QAAA,aAEjCwB,OAAO,CAACC,KAAK,CAAAzB,QAAA,CAAAuB,EAAA,CAAK,CAAC,yBAAAvB,QAAA,CAAA0B,IAAA,MAAAhC,OAAA,iBAEtB,kBA1BK,CAAAL,cAAcA,CAAA,SAAAC,IAAA,CAAAqC,KAAA,MAAAC,SAAA,OA0BnB,CAED,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,IAAI,CAAK,CAChCN,OAAO,CAACO,GAAG,CAAC,kBAAkB,CAAED,IAAI,CAACE,OAAO,CAAC,CAC/C,CAAC,CAED,GAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIH,IAAI,CAAK,CACjC1C,mBAAmB,CAAC0C,IAAI,CAACI,KAAK,CAAC,CACjC,CAAC,CAED,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACxB/C,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAC,CAED,mBACEhB,KAAA,QAAKgE,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBnE,IAAA,CAACV,YAAY,EACX8E,OAAO,CAAE,CAAC7E,aAAa,CAAEC,cAAc,CAAEC,iBAAiB,CAAE,CAC5D4E,WAAW,CAAC,cAAc,CAC1BC,aAAa,CAAE,CACbC,IAAI,CAAE,iBAAiB,CACvBC,MAAM,CAAE,OAAO,CACfC,KAAK,CAAE,uCACT,CAAE,CACFC,MAAM,CAAE7D,SAAU,CAClB8D,SAAS,CAAEhB,eAAgB,CAC3BiB,UAAU,CAAEb,gBAAkB;AAAA,EAC9B,cAGF7D,KAAA,CAACR,MAAM,EAACmF,IAAI,CAAE5D,gBAAgB,GAAK,IAAK,CAAC6D,OAAO,CAAEb,WAAY,CAAAE,QAAA,eAC5DnE,IAAA,CAACL,WAAW,EAAAwE,QAAA,CAAElD,gBAAgB,SAAhBA,gBAAgB,iBAAhBA,gBAAgB,CAAEsB,KAAK,EAAe,cACpDvC,IAAA,CAACL,WAAW,EAAAwE,QAAA,CAAElD,gBAAgB,SAAhBA,gBAAgB,iBAAhBA,gBAAgB,CAAE8D,aAAa,CAACxC,KAAK,EAAe,cAClErC,KAAA,CAACN,aAAa,EAAAuE,QAAA,eACpBjE,KAAA,MAAAiE,QAAA,EAAG,QAAM,CAAClD,gBAAgB,CAAGA,gBAAgB,CAACkC,KAAK,CAAC6B,kBAAkB,EAAE,CAAG,EAAE,GAAK,cAClF9E,KAAA,MAAAiE,QAAA,EAAG,YAAU,CAAClD,gBAAgB,CAAG,CAAC,CAACA,gBAAgB,CAACmC,GAAG,CAAGnC,gBAAgB,CAACkC,KAAK,EAAI,KAAK,EAAE8B,OAAO,EAAE,CAAG,EAAE,CAAC,UAAQ,GAAI,cACtH/E,KAAA,MAAAiE,QAAA,EAAG,YAAU,CAAClD,gBAAgB,SAAhBA,gBAAgB,iBAAhBA,gBAAgB,CAAE8D,aAAa,CAACtC,QAAQ,GAAK,CAC1D,CAAAxB,gBAAgB,SAAhBA,gBAAgB,iBAAhBA,gBAAgB,CAAE8D,aAAa,CAACzC,QAAQ,gBACvCpC,KAAA,CAAAE,SAAA,EAAA+D,QAAA,eACEjE,KAAA,MAAAiE,QAAA,EAAG,YAAU,CAAClD,gBAAgB,CAAC8D,aAAa,CAACzC,QAAQ,CAACI,SAAS,CAAC,GAAC,CAACzB,gBAAgB,CAAC8D,aAAa,CAACzC,QAAQ,CAACK,QAAQ,GAAK,cACvHzC,KAAA,MAAAiE,QAAA,EAAG,SAAO,CAAClD,gBAAgB,CAAC8D,aAAa,CAACzC,QAAQ,CAAC4C,KAAK,GAAK,cAC7DhF,KAAA,MAAAiE,QAAA,EAAG,SAAO,CAAClD,gBAAgB,CAAC8D,aAAa,CAACzC,QAAQ,CAAC6C,KAAK,GAAK,GAEhE,GACa,cAGRnF,IAAA,CAACH,aAAa,EAAAsE,QAAA,cACZnE,IAAA,CAACF,MAAM,EAACsF,OAAO,CAAEnB,WAAY,CAAAE,QAAA,CAAC,OAAK,EAAS,EAC9B,GACT,GACL,CAEV,CAEA,cAAe,CAAA9D,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}